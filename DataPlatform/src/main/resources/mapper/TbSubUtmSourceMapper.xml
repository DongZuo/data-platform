<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yxb.cms.dao.input.TbSubUtmSourceMapper">
  <resultMap id="BaseResultMap" type="com.yxb.cms.model.input.TbSubUtmSource">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 24 18:02:13 CST 2015.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="parent_id" jdbcType="INTEGER" property="parentId" />
    <result column="source_name" jdbcType="VARCHAR" property="sourceName" />
    <result column="plan" jdbcType="VARCHAR" property="plan" />
    <result column="unit" jdbcType="VARCHAR" property="unit" />
    <result column="keyword" jdbcType="VARCHAR" property="keyword" />
    <result column="utm_medium" property="utmMedium" jdbcType="VARCHAR" />
    <result column="landing_page" property="landingPage" jdbcType="VARCHAR" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 24 18:02:13 CST 2015.
    -->
    delete from tb_sub_utm_source
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.yxb.cms.model.input.TbSubUtmSource">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 24 18:02:13 CST 2015.
    -->
    insert into tb_sub_utm_source (id, parent_id, source_name, 
      plan, unit, keyword,utm_medium,base_utm_source,landing_page
      )
    values (#{id,jdbcType=INTEGER}, #{parentId,jdbcType=INTEGER}, #{sourceName,jdbcType=VARCHAR}, 
      #{plan,jdbcType=VARCHAR}, #{unit,jdbcType=VARCHAR}, #{keyword,jdbcType=VARCHAR},
      #{utmMedium,jdbcType=VARCHAR},#{base_utm_source,jdbcType=VARCHAR},#{landingPage,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.yxb.cms.model.input.TbSubUtmSource">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 24 18:02:13 CST 2015.
    -->
    update tb_sub_utm_source
    set parent_id = #{parentId,jdbcType=INTEGER},
      source_name = #{sourceName,jdbcType=VARCHAR},
      plan = #{plan,jdbcType=VARCHAR},
      unit = #{unit,jdbcType=VARCHAR},
      keyword = #{keyword,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 24 18:02:13 CST 2015.
    -->
    select id, parent_id, source_name, plan, unit, keyword,landing_page
    from tb_sub_utm_source
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 24 18:02:13 CST 2015.
    -->
    select id, parent_id, source_name, plan, unit, keyword,landing_page
    from tb_sub_utm_source
    order by parent_id, source_name
  </select>
  
  <select id="selectCount" resultType="int">
    select count(*)
    from tb_sub_utm_source s, tb_utm_source u
    where s.parent_id = u.id
    <if test="utmSourceCond != null and utmSourceCond !='%%'"> 
    and s.source_name like #{utmSourceCond,jdbcType=VARCHAR}
   </if>
     <if test="descriptionCond != null and descriptionCond !='%%'">
    and u.description like #{descriptionCond,jdbcType=VARCHAR}
     </if>
     <if test="planCond != null and planCond !='%%'">
    and (#{planCond,jdbcType=VARCHAR} = '%%' or s.plan like #{planCond,jdbcType=VARCHAR})
     </if>
     <if test="unitCond != null and unitCond !='%%'">
    and (#{unitCond,jdbcType=VARCHAR} = '%%' or s.unit like #{unitCond,jdbcType=VARCHAR})
     </if>
    <if test="keywordCond != null and keywordCond !='%%'">
    and (#{keywordCond,jdbcType=VARCHAR} = '%%' or s.keyword like #{keywordCond,jdbcType=VARCHAR})
     </if>
  </select>
  
  <select id="select" resultMap="BaseResultMap">
    select s.id, s.parent_id, s.source_name, s.plan, s.unit, s.keyword,s.landing_page
    from tb_sub_utm_source s , tb_utm_source u
    where s.parent_id = u.id
    <if test="utmSourceCond != null and utmSourceCond !='%%'"> 
    and s.source_name like #{utmSourceCond,jdbcType=VARCHAR}
   </if>
     <if test="descriptionCond != null and descriptionCond !='%%'">
    and u.description like #{descriptionCond,jdbcType=VARCHAR}
     </if>
     <if test="planCond != null and planCond !='%%'">
    and (#{planCond,jdbcType=VARCHAR} = '%%' or s.plan like #{planCond,jdbcType=VARCHAR})
     </if>
     <if test="unitCond != null and unitCond !='%%'">
    and (#{unitCond,jdbcType=VARCHAR} = '%%' or s.unit like #{unitCond,jdbcType=VARCHAR})
     </if>
    <if test="keywordCond != null and keywordCond !='%%'">
    and (#{keywordCond,jdbcType=VARCHAR} = '%%' or s.keyword like #{keywordCond,jdbcType=VARCHAR})
     </if>
    order by s.parent_id, s.source_name
    limit #{offset,jdbcType=INTEGER}, #{rows,jdbcType=INTEGER}
  </select>
  
  <select id="selectExcel" resultMap="BaseResultMap">
    select s.id, s.parent_id, s.source_name, s.plan, s.unit, s.keyword,s.landing_page
    from tb_sub_utm_source s , tb_utm_source u
    where s.parent_id = u.id
    <if test="utmSourceCond != null and utmSourceCond !='%%'"> 
    and s.source_name like #{utmSourceCond,jdbcType=VARCHAR}
    </if>
    <if test="descriptionCond != null and descriptionCond !='%%'"> 
    and u.description like #{descriptionCond,jdbcType=VARCHAR}
    </if>
    <if test="planCond != null and planCond !='%%'"> 
    and (#{planCond,jdbcType=VARCHAR} = '%%' or s.plan like #{planCond,jdbcType=VARCHAR})
    </if>
    <if test="unitCond != null and unitCond !='%%'"> 
    and (#{unitCond,jdbcType=VARCHAR} = '%%' or s.unit like #{unitCond,jdbcType=VARCHAR})
    </if>
    <if test="keywordCond != null and keywordCond !='%%'"> 
    and (#{keywordCond,jdbcType=VARCHAR} = '%%' or s.keyword like #{keywordCond,jdbcType=VARCHAR})
    </if>
    order by s.parent_id, s.source_name
  </select>
</mapper>